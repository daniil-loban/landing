{"version":3,"sources":["webpack://app/../node_modules/lodash/_shuffleSelf.js","webpack://app/../node_modules/lodash/shuffle.js","webpack://app/../node_modules/lodash/_arrayShuffle.js","webpack://app/../node_modules/lodash/_copyArray.js","webpack://app/../node_modules/lodash/_baseRandom.js","webpack://app/../node_modules/lodash/_baseShuffle.js","webpack://app/../node_modules/lodash/values.js","webpack://app/../node_modules/lodash/_baseValues.js","webpack://app/../node_modules/lodash/_arrayMap.js","webpack://app/../node_modules/lodash/keys.js","webpack://app/../node_modules/lodash/_overArg.js","webpack://app/../node_modules/lodash/isArray.js","webpack://app/./components/for-task/phrase-builder/index.vue?db4b","webpack://app/components/for-task/phrase-builder/index.vue","webpack://app/./components/for-task/phrase-builder/index.vue?20ac","webpack://app/./components/for-task/phrase-builder/index.vue","webpack://app/./components/drag-drop/drag-drop.js","webpack://app/./components/for-task/phrase-builder/index.scss?0c07"],"names":["baseRandom","__webpack_require__","module","exports","array","size","index","length","lastIndex","undefined","rand","value","arrayShuffle","baseShuffle","isArray","collection","copyArray","shuffleSelf","source","Array","nativeFloor","Math","floor","nativeRandom","random","lower","upper","values","baseValues","keys","object","arrayMap","props","key","iteratee","result","nativeKeys","overArg","Object","func","transform","arg","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","_v","_l","words","word","_s","_withStripped","shuffle","for_task_phrase_buildervue_type_script_lang_js_","mixins","keyboard","description","type","String","default","componentInfo","data","phrase","selectedArea","oppositeArea","selectedWordIndex","[object Object]","ru_en","$emit","makeParts","drag_drop","addDragDropListener","callback","methods","areas","newSelectedArea","$el","querySelector","hasChildNodes","children","hightLightSelectedWord","$parent","moveWord","swapAreaFocus","appendChild","oldSelection","classList","remove","add","document","textContent","replace","trim","setResult","hideSelectionFromWord","convenient","split","component","componentNormalizer","options","__file","__webpack_exports__","DROP_AREA_HIGHLIGHT","allDropAreas","allDragWords","currentDragOverArea","touchMove","e","event","target","contains","touchLocation","targetTouches","compStyles","window","getComputedStyle","width","parseInt","height","style","left","pageX","top","pageY","x","y","i","dest","rc","getBoundingClientRect","right","bottom","dragOverCheck","touchEnd","parentNode","dataset","maxchildren","drop","preventDefault","dataTransfer","getData","getElementById","dragLeave","currentTarget","allowDrop","drag","testClasses","setData","cb","querySelectorAll","forEach","element","addEventListener","setAttribute","passive","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_index_scss_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","n"],"mappings":"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","file":"1.b7d1cb5b05c447807f06.js","sourcesContent":["var baseRandom = require('./_baseRandom');\n\n/**\n * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n *\n * @private\n * @param {Array} array The array to shuffle.\n * @param {number} [size=array.length] The size of `array`.\n * @returns {Array} Returns `array`.\n */\nfunction shuffleSelf(array, size) {\n  var index = -1,\n      length = array.length,\n      lastIndex = length - 1;\n\n  size = size === undefined ? length : size;\n  while (++index < size) {\n    var rand = baseRandom(index, lastIndex),\n        value = array[rand];\n\n    array[rand] = array[index];\n    array[index] = value;\n  }\n  array.length = size;\n  return array;\n}\n\nmodule.exports = shuffleSelf;\n","var arrayShuffle = require('./_arrayShuffle'),\n    baseShuffle = require('./_baseShuffle'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of shuffled values, using a version of the\n * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to shuffle.\n * @returns {Array} Returns the new shuffled array.\n * @example\n *\n * _.shuffle([1, 2, 3, 4]);\n * // => [4, 1, 3, 2]\n */\nfunction shuffle(collection) {\n  var func = isArray(collection) ? arrayShuffle : baseShuffle;\n  return func(collection);\n}\n\nmodule.exports = shuffle;\n","var copyArray = require('./_copyArray'),\n    shuffleSelf = require('./_shuffleSelf');\n\n/**\n * A specialized version of `_.shuffle` for arrays.\n *\n * @private\n * @param {Array} array The array to shuffle.\n * @returns {Array} Returns the new shuffled array.\n */\nfunction arrayShuffle(array) {\n  return shuffleSelf(copyArray(array));\n}\n\nmodule.exports = arrayShuffle;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor,\n    nativeRandom = Math.random;\n\n/**\n * The base implementation of `_.random` without support for returning\n * floating-point numbers.\n *\n * @private\n * @param {number} lower The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the random number.\n */\nfunction baseRandom(lower, upper) {\n  return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n}\n\nmodule.exports = baseRandom;\n","var shuffleSelf = require('./_shuffleSelf'),\n    values = require('./values');\n\n/**\n * The base implementation of `_.shuffle`.\n *\n * @private\n * @param {Array|Object} collection The collection to shuffle.\n * @returns {Array} Returns the new shuffled array.\n */\nfunction baseShuffle(collection) {\n  return shuffleSelf(values(collection));\n}\n\nmodule.exports = baseShuffle;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"builder\" }, [\n    _c(\"div\", { staticClass: \"border drop-area\", attrs: { id: \"phrase\" } }),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      { staticClass: \"border drop-area\", attrs: { id: \"words\" } },\n      _vm._l(_vm.words, function(word, index) {\n        return _c(\n          \"span\",\n          {\n            key: word,\n            staticClass: \"drag-element\",\n            attrs: { id: word + index }\n          },\n          [_vm._v(\"\\n      \" + _vm._s(word) + \"\\n    \")]\n        )\n      }),\n      0\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"builder\">\n    <div\n      id=\"phrase\"\n      class=\"border drop-area\"\n    />\n    <div\n      id=\"words\"\n      class=\"border drop-area\"\n    >\n      <span\n        v-for=\"(word, index) in words\"\n        :id=\"word+index\"\n        :key=\"word\"\n        class=\"drag-element\"\n      >\n        {{ word }}\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport moduleDragDrop from '../../drag-drop/drag-drop';\nimport keyboardMixin from '../../mixins/keyboard';\n\nconst shuffle = require('lodash/shuffle');\n\nexport default {\n  mixins: [keyboardMixin],\n  props: {\n    description: {\n      type: String,\n      default: () => 'description',\n    },\n    componentInfo: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      phrase: null,\n      words: null,\n      selectedArea: null,\n      oppositeArea: null,\n      selectedWordIndex: -1,\n    };\n  },\n  mounted() {\n    const RUSSIAN = 0;\n    const ENGLISH = 1;\n    const { data } = this.componentInfo;\n    const random = Math.floor(Math.random() * data.ru_en.length);\n    this.$emit('set-description', `${this.description}\\xA0:\\n\"${data.ru_en[random][RUSSIAN]}\"`);\n    this.phrase = data.ru_en[random][ENGLISH];\n    this.makeParts();\n  },\n  updated() {\n    moduleDragDrop.addDragDropListener(this.callback);\n  },\n  methods: {\n    swapAreaFocus() {\n      const areas = ['#phrase', '#words'];\n      const TOP_AREA = 0;\n      const BOTTOM_AREA = 1;\n      let newSelectedArea;\n      if (this.selectedArea === this.$el.querySelector(areas[TOP_AREA])) {\n        newSelectedArea = this.$el.querySelector(areas[BOTTOM_AREA]);\n        if (newSelectedArea.hasChildNodes()) {\n          this.oppositeArea = this.$el.querySelector(areas[TOP_AREA]);\n          this.selectedArea = newSelectedArea;\n          this.selectedWordIndex = 0; // first in words\n        }\n      } else {\n        newSelectedArea = this.$el.querySelector(areas[TOP_AREA]);\n        if (newSelectedArea.hasChildNodes()) {\n          this.oppositeArea = this.$el.querySelector(areas[BOTTOM_AREA]);\n          this.selectedArea = newSelectedArea;\n          this.selectedWordIndex = this.selectedArea.children.length - 1; // last in phrase\n        }\n      }\n      this.hightLightSelectedWord();\n    },\n    keyDown(key) {\n      if (this.selectedArea === null) {\n        this.selectedArea = this.$el.querySelector('#words');\n        this.oppositeArea = this.$el.querySelector('#phrase');\n      }\n      switch (key) {\n        case 'Enter':\n          this.$parent.$emit('closeme', '');\n          break;\n        case 'Space':\n          this.moveWord();\n          break;\n        case 'ArrowLeft':\n          if (this.selectedWordIndex === 0 || this.selectedWordIndex === -1) {\n            this.selectedWordIndex = this.selectedArea.children.length;\n          }\n          this.selectedWordIndex -= 1;\n          break;\n        case 'ArrowRight':\n          if (this.selectedWordIndex === this.selectedArea.children.length - 1) {\n            this.selectedWordIndex = -1;\n          }\n          this.selectedWordIndex += 1;\n          break;\n        case 'ArrowUp':\n        case 'ArrowDown':\n          this.swapAreaFocus();\n          break;\n        default:\n          break;\n      }\n      this.hightLightSelectedWord();\n    },\n    moveWord() {\n      if (this.selectedWordIndex === -1\n      || this.selectedWordIndex >= this.selectedArea.children.length) {\n        return;\n      }\n      this.oppositeArea.appendChild(this.selectedArea.children[this.selectedWordIndex]);\n      this.selectedWordIndex = -1;\n      if (!this.selectedArea.hasChildNodes()) {\n        this.swapAreaFocus();\n      }\n    },\n    hightLightSelectedWord() {\n      const oldSelection = this.$el.querySelector('.selected');\n      if (oldSelection !== null) {\n        oldSelection.classList.remove('selected');\n      }\n      if (this.selectedWordIndex !== -1\n        && this.selectedWordIndex < this.selectedArea.children.length) {\n        this.selectedArea.children[this.selectedWordIndex].classList.add('selected');\n      }\n    },\n    hideSelectionFromWord() {\n      this.selectedWordIndex = -1;\n      this.hightLightSelectedWord();\n    },\n\n    callback() {\n      const element = document.querySelector('#phrase');\n      const result = element.textContent.replace(/\\s\\s+/g, ' ').trim();\n      this.$parent.setResult(result === this.phrase);\n      this.hideSelectionFromWord();\n    },\n    makeParts() {\n      let convenient = this.phrase;\n      convenient = convenient.replace(/([^ a-zа-яё\\d])/uig, ' $1 ');\n      convenient = convenient.replace(/\\s\\s+/g, ' ');\n      this.words = shuffle(convenient.split(' '));\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" src=\"./index.scss\" ></style>\n","import mod from \"-!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3f9db465&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\Daniil\\\\Desktop\\\\RS2\\\\daniil-loban-2018Q3\\\\game\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('3f9db465', component.options)\n    } else {\n      api.reload('3f9db465', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=3f9db465&\", function () {\n      api.rerender('3f9db465', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"components/for-task/phrase-builder/index.vue\"\nexport default component.exports","const DROP_AREA_HIGHLIGHT = 'drop-area-highlight';\nlet allDropAreas;\nlet allDragWords;\nlet currentDragOverArea = null;\nlet callback = null;\n\nfunction dragOverCheck(x, y) {\n  for (let i = 0; i < allDropAreas.length; i += 1) {\n    const dest = allDropAreas[i];\n    const rc = dest.getBoundingClientRect();\n    if (x > rc.left && x < rc.right && y > rc.top && y < rc.bottom) {\n      if (currentDragOverArea !== null) {\n        currentDragOverArea.classList.remove(DROP_AREA_HIGHLIGHT);\n      }\n      currentDragOverArea = dest;\n      currentDragOverArea.classList.add(DROP_AREA_HIGHLIGHT);\n      return dest;\n    }\n  }\n  return true;\n}\n\nfunction touchMove(e) {\n  const event = e;\n  if (!event.target.classList.contains('drag-element')) return false;\n  const touchLocation = event.targetTouches[0];\n  event.target.classList.add('dragged-now');\n  const compStyles = window.getComputedStyle(event.target);\n  const width = parseInt(compStyles.width, 10);\n  const height = parseInt(compStyles.height, 10);\n  event.target.style.left = `${touchLocation.pageX - width / 2}px`;\n  event.target.style.top = `${touchLocation.pageY - height * 2}px`;\n  dragOverCheck(touchLocation.pageX, touchLocation.pageY);\n  return true;\n}\n\nfunction touchEnd(event) {\n  const dest = currentDragOverArea;\n  event.target.classList.remove('dragged-now');\n  if (dest && !dest.classList.contains('drag-element')\n    && dest !== event.target.parentNode\n    && (+dest.dataset.maxchildren > dest.children.length\n       || dest.dataset.maxchildren === undefined)) {\n    dest.appendChild(event.target);\n    currentDragOverArea = null;\n    if (callback !== null) {\n      callback(event);\n    }\n    dest.classList.remove(DROP_AREA_HIGHLIGHT);\n  }\n}\n\nfunction drop(event) {\n  event.preventDefault();\n  const data = event.dataTransfer.getData('text');\n  if (!event.target.classList.contains('drag-element')\n     && event.target !== document.getElementById(data).parentNode\n     && (+event.target.dataset.maxchildren > event.target.children.length\n        || event.target.dataset.maxchildren === undefined)) {\n    event.target.appendChild(document.getElementById(data));\n    currentDragOverArea = null;\n    if (callback !== null) {\n      callback(event);\n    }\n    event.target.classList.remove(DROP_AREA_HIGHLIGHT);\n  }\n}\n\nfunction dragLeave(event) {\n  event.currentTarget.classList.remove(DROP_AREA_HIGHLIGHT);\n}\n\nfunction allowDrop(event) {\n  event.preventDefault();\n  event.currentTarget.classList.add(DROP_AREA_HIGHLIGHT);\n}\n\n\nfunction drag(event) {\n  const testClasses = event.target.classList;\n  if ((testClasses.contains('drag-element'))\n     || (!testClasses.contains('drag-area'))) {\n    event.dataTransfer.setData('text', event.target.id);\n  }\n}\n\nfunction addDragDropListener(cb) {\n  callback = cb;\n  allDropAreas = document.querySelectorAll('.drop-area');\n  allDragWords = document.querySelectorAll('.drag-element');\n\n  allDragWords.forEach((element) => {\n    element.addEventListener('dragstart', drag, false);\n    element.setAttribute('draggable', 'true');\n  });\n\n  allDropAreas.forEach((element) => {\n    element.addEventListener('touchmove', touchMove, { passive: true });\n    element.addEventListener('touchend', touchEnd, false);\n    element.addEventListener('drop', drop, false);\n    element.addEventListener('dragover', allowDrop, false);\n    element.addEventListener('dragleave', dragLeave, false);\n  });\n}\n\nexport default { addDragDropListener };\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/lib/loader.js!./index.scss?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/lib/loader.js!./index.scss?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}