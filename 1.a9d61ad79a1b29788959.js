(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[1],{32:function(e,t,r){var s=r(36);e.exports=function(e,t){var r=-1,n=e.length,a=n-1;for(t=void 0===t?n:t;++r<t;){var i=s(r,a),o=e[i];e[i]=e[r],e[r]=o}return e.length=t,e}},33:function(e,t,r){var s=r(34),n=r(37),a=r(43);e.exports=function(e){return(a(e)?s:n)(e)}},34:function(e,t,r){var s=r(35),n=r(32);e.exports=function(e){return n(s(e))}},35:function(e,t){e.exports=function(e,t){var r=-1,s=e.length;for(t||(t=Array(s));++r<s;)t[r]=e[r];return t}},36:function(e,t){var r=Math.floor,s=Math.random;e.exports=function(e,t){return e+r(s()*(t-e+1))}},37:function(e,t,r){var s=r(32),n=r(38);e.exports=function(e){return s(n(e))}},38:function(e,t,r){var s=r(39),n=r(41);e.exports=function(e){return null==e?[]:s(e,n(e))}},39:function(e,t,r){var s=r(40);e.exports=function(e,t){return s(t,function(t){return e[t]})}},40:function(e,t){e.exports=function(e,t){for(var r=-1,s=null==e?0:e.length,n=Array(s);++r<s;)n[r]=t(e[r],r,e);return n}},41:function(e,t,r){var s=r(42)(Object.keys,Object);e.exports=s},42:function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},43:function(e,t){var r=Array.isArray;e.exports=r},45:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"builder"},[r("div",{staticClass:"border drop-area",attrs:{id:"phrase"}}),e._v(" "),r("div",{staticClass:"border drop-area",attrs:{id:"words"}},e._l(e.words,function(t,s){return r("span",{key:t,staticClass:"drag-element",attrs:{id:t+s}},[e._v("\n      "+e._s(t)+"\n    ")])}),0)])};s._withStripped=!0;var n=r(57),a=r(1);const i=r(33);var o={mixins:[a.a],props:{description:{type:String,default:()=>"description"},componentInfo:{type:Object,default:()=>{}}},data:()=>({phrase:null,words:null,selectedArea:null,oppositeArea:null,selectedWordIndex:-1}),mounted(){const{data:e}=this.componentInfo,t=Math.floor(Math.random()*e.ru_en.length);this.$emit("set-description",`${this.description} :\n"${e.ru_en[t][0]}"`),this.phrase=e.ru_en[t][1],this.makeParts()},updated(){n.a.addDragDropListener(this.callback)},methods:{swapAreaFocus(){const e=["#phrase","#words"];let t;this.selectedArea===this.$el.querySelector(e[0])?(t=this.$el.querySelector(e[1])).hasChildNodes()&&(this.oppositeArea=this.$el.querySelector(e[0]),this.selectedArea=t,this.selectedWordIndex=0):(t=this.$el.querySelector(e[0])).hasChildNodes()&&(this.oppositeArea=this.$el.querySelector(e[1]),this.selectedArea=t,this.selectedWordIndex=this.selectedArea.children.length-1),this.hightLightSelectedWord()},keyDown(e){switch(null===this.selectedArea&&(this.selectedArea=this.$el.querySelector("#words"),this.oppositeArea=this.$el.querySelector("#phrase")),e){case"Enter":this.$parent.$emit("closeme","");break;case"Space":this.moveWord();break;case"ArrowLeft":0!==this.selectedWordIndex&&-1!==this.selectedWordIndex||(this.selectedWordIndex=this.selectedArea.children.length),this.selectedWordIndex-=1;break;case"ArrowRight":this.selectedWordIndex===this.selectedArea.children.length-1&&(this.selectedWordIndex=-1),this.selectedWordIndex+=1;break;case"ArrowUp":case"ArrowDown":this.swapAreaFocus()}this.hightLightSelectedWord()},moveWord(){-1===this.selectedWordIndex||this.selectedWordIndex>=this.selectedArea.children.length||(this.oppositeArea.appendChild(this.selectedArea.children[this.selectedWordIndex]),this.selectedWordIndex=-1,this.selectedArea.hasChildNodes()||this.swapAreaFocus())},hightLightSelectedWord(){const e=this.$el.querySelector(".selected");null!==e&&e.classList.remove("selected"),-1!==this.selectedWordIndex&&this.selectedWordIndex<this.selectedArea.children.length&&this.selectedArea.children[this.selectedWordIndex].classList.add("selected")},hideSelectionFromWord(){this.selectedWordIndex=-1,this.hightLightSelectedWord()},callback(){const e=document.querySelector("#phrase").textContent.replace(/\s\s+/g," ").trim();this.$parent.setResult(e===this.phrase),this.hideSelectionFromWord()},makeParts(){let e=this.phrase;e=(e=e.replace(/([^ a-zа-яё\d])/giu," $1 ")).replace(/\s\s+/g," "),this.words=i(e.split(" "))}}},d=(r(76),r(0)),l=Object(d.a)(o,s,[],!1,null,null,null);l.options.__file="components/for-task/phrase-builder/index.vue";t.default=l.exports},57:function(e,t,r){"use strict";const s="drop-area-highlight";let n,a,i=null,o=null;function d(e){const t=e;if(!t.target.classList.contains("drag-element"))return!1;const r=t.targetTouches[0];t.target.classList.add("dragged-now");const a=window.getComputedStyle(t.target),o=parseInt(a.width,10),d=parseInt(a.height,10);return t.target.style.left=`${r.pageX-o/2}px`,t.target.style.top=`${r.pageY-2*d}px`,function(e,t){for(let r=0;r<n.length;r+=1){const a=n[r],o=a.getBoundingClientRect();if(e>o.left&&e<o.right&&t>o.top&&t<o.bottom)return null!==i&&i.classList.remove(s),(i=a).classList.add(s),a}}(r.pageX,r.pageY),!0}function l(e){const t=i;e.target.classList.remove("dragged-now"),t&&!t.classList.contains("drag-element")&&t!==e.target.parentNode&&(+t.dataset.maxchildren>t.children.length||void 0===t.dataset.maxchildren)&&(t.appendChild(e.target),i=null,null!==o&&o(e),t.classList.remove(s))}function c(e){e.preventDefault();const t=e.dataTransfer.getData("text");!e.target.classList.contains("drag-element")&&e.target!==document.getElementById(t).parentNode&&(+e.target.dataset.maxchildren>e.target.children.length||void 0===e.target.dataset.maxchildren)&&(e.target.appendChild(document.getElementById(t)),i=null,null!==o&&o(e),e.target.classList.remove(s))}function h(e){e.currentTarget.classList.remove(s)}function u(e){e.preventDefault(),e.currentTarget.classList.add(s)}function p(e){const t=e.target.classList;!t.contains("drag-element")&&t.contains("drag-area")||e.dataTransfer.setData("text",e.target.id)}t.a={addDragDropListener:function(e){o=e,n=document.querySelectorAll(".drop-area"),(a=document.querySelectorAll(".drag-element")).forEach(e=>{e.addEventListener("dragstart",p,!1),e.setAttribute("draggable","true")}),n.forEach(e=>{e.addEventListener("touchmove",d,{passive:!0}),e.addEventListener("touchend",l,!1),e.addEventListener("drop",c,!1),e.addEventListener("dragover",u,!1),e.addEventListener("dragleave",h,!1)})}}},58:function(e,t,r){},76:function(e,t,r){"use strict";var s=r(58);r.n(s).a}}]);
//# sourceMappingURL=1.a9d61ad79a1b29788959.js.map